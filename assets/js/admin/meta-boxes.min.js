!function(p,l){p(function(){function c(e,i){var t=e.position(),o=e.parent();o.find(".wc_error_tip").remove(),e.after('<div class="wc_error_tip">'+i+"</div>"),o.find(".wc_error_tip").css("left",t.left+e.width()-e.width()/2-p(".wc_error_tip").width()/2).css("top",t.top+e.height()+4)}function s(e){e.parent().find(".wc_error_tip").fadeOut("100",function(){p(this).remove()})}var o=p(".allow_combination_field"),a=p(".options_group #allow_combination"),r=p("input#maximum_allowed_quantity").val(),i=p("#min_max_settings").prevAll(".options_group:visible:first"),e=("variable"===p("#product-type").val()?o.show():o.hide(),i.addClass("mmq_previous_section"),l.querySelector("#general_product_data")),t=new MutationObserver(function(e){i.removeClass("mmq_previous_section"),(i=p("#min_max_settings").prevAll(".options_group:visible:first")).addClass("mmq_previous_section")}),n=(null!==e&&t.observe(e,{attributes:!0,childList:!0,characterData:!0}),p(l.body).on("woocommerce-product-type-change",function(e,i,t){"variable"===i?o.show():o.hide()}),a.on("change",function(){p(".checkbox.min_max_rules").parents(".woocommerce_variable_attributes").find(".min_max_rules_options").each(function(){var e=p(this).closest(".woocommerce_variation .data").find(".checkbox.min_max_rules");a.is(":checked")?(e.prop("disabled",!0),e.is(":checked")&&(e.prop("checked",!1),e.data("prev-checked",!0)),p(this).hide()):(e.prop("disabled",!1),e.data("prev-checked")&&(e.prop("checked",!0),p(this).show()))})}),p("#woocommerce-product-data").on("woocommerce_variations_loaded woocommerce_variations_added",function(){var e=p(".checkbox.min_max_rules").parents(".woocommerce_variable_attributes").find(".min_max_rules_options"),i=p("input.variation_minimum_allowed_quantity"),t=p("input.variation_maximum_allowed_quantity"),o=p("input.variation_group_of_quantity");e.each(function(){var e=p(this).closest(".woocommerce_variation .data").find(".checkbox.min_max_rules");a.is(":checked")?(e.prop("disabled",!0),e.is(":checked")&&(e.prop("checked",!1),e.data("prev-checked",!0))):(e.prop("disabled",!1),e.data("prev-checked")&&e.prop("checked",!0)),e.is(":checked")&&!e.is(":disabled")?p(this).show():p(this).hide()}),i.each(function(){p(this).on("keyup change focusout focus click",function(){var e=p(this),i=e.val(),t=e.closest(".min_max_rules_options"),o=t.find("input.variation_maximum_allowed_quantity"),t=t.find("input.variation_group_of_quantity");is_valid=n(e,i,t.val(),o)})}),t.each(function(){p(this).data("prev-value",p(this).val()),p(this).on("keyup change focusout focus click",function(){var e=p(this),i=e.val(),t=e.closest(".min_max_rules_options"),o=t.find("input.variation_minimum_allowed_quantity"),t=t.find("input.variation_group_of_quantity"),a=e.data("prev-value");(is_valid=u(e,i,t.val(),o.val(),a))&&e.data("prev-value",e.val())})}),o.each(function(){p(this).on("keyup change focusout focus click",function(){var e=p(this),i=e.val(),e=e.closest(".min_max_rules_options").find("input.variation_minmax_category_group_of_exclude");i?e.is(":checked")||(e.prop("disabled",!0),e.prop("checked",!0)):e.is(":disabled")&&e.is(":checked")&&(e.prop("disabled",!1),e.prop("checked",!1))})})}),p(".woocommerce_variations").on("change",".checkbox.min_max_rules",function(){var e=p(this).parents(".woocommerce_variable_attributes").find(".min_max_rules_options");p(this).is(":checked")?e.show():e.hide()}),p("input#minimum_allowed_quantity").on("keyup change focusout focus click",function(){var e=p(this),i=e.val(),t=e.closest(".options_group"),o=t.find("input#maximum_allowed_quantity"),t=t.find("input#group_of_quantity");is_valid=n(e,i,t.val(),o)}),p("input#maximum_allowed_quantity").on("keyup change focusout focus click",function(){var e=p(this),i=e.val(),t=e.closest(".options_group"),o=t.find("input#minimum_allowed_quantity"),t=t.find("input#group_of_quantity");is_valid=u(e,i,t.val(),o.val())}),p("input#group_of_quantity").on("keyup change focusout focus click",function(){var e=p(this),i=e.val(),e=e.closest(".options_group").find("input.exclude_category_rules");i?e.is(":checked")||(e.prop("disabled",!0),e.prop("checked",!0)):e.is(":disabled")&&e.is(":checked")&&(e.prop("disabled",!1),e.prop("checked",!1))}),function(e,i,t,o){var a=!0;return""!==i&&(i=parseInt(i,10),0<(t=parseInt(t,10))&&0<i&&i%t&&(a=!1,i=t*Math.ceil(i/t),"keyup"!==event.type&&"change"!==event.type&&"click"!==event.type&&"focus"!==event.type||!e.is(":focus")?(e.val(i).change(),a=!0):setTimeout(function(){c(e,"Please enter an integer that is a multiple of "+t+".")},5)),i>o.val()&&""!==o.val()&&(o.val(i),r=i),o.prop("min",i),a)&&s(e),a}),u=function(e,i,t,o,a=r){var n=!0;return""!==i&&(i=parseInt(i,10),t=parseInt(t,10),o=parseInt(o,10),0<t&&0<i&&i%t&&(n=!1,i=t*Math.floor(i/t),"keyup"!==event.type&&"change"!==event.type&&"click"!==event.type&&"focus"!==event.type||!e.is(":focus")?(e.val(i=0===i?"":i).change(),n=!0):setTimeout(function(){c(e,"Please enter an integer that is a multiple of "+t+".")},5)),i<o&&n&&("keyup"!==event.type&&"change"!==event.type||!e.is(":focus")?(a<o&&(a=o),e.val(a).change(),i=a,n=!0):setTimeout(function(){c(e,"Please enter an integer higher than "+(o-1)+".")},5)),!n)||(r=i,s(e)),n}})}(jQuery,document,window);
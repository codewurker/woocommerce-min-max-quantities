(()=>{"use strict";const e=window.wp.blocks,t=window.React,o=window.wc.blockTemplates,a=window.wc.productEditor,r=window.wp.i18n,n=window.wp.data,i=window.wp.coreData;const p=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"woocommerce-min-max/variation-group-of-quantity-field","version":"0.1.0","title":"Sell in groups of","category":"widgets","icon":"flag","description":"Sell in groups of","attributes":{"label":{"type":"string","__experimentalRole":"content"}},"supports":{"html":false,"inserter":false},"textdomain":"woocommerce-min-max-quantities","editorScript":"file:./index.js","usesContext":["postType"]}');(0,e.registerBlockType)(p,{edit:function({attributes:e,context:{postType:p}}){const s=(0,o.useWooBlockProps)(e),[u,c]=(0,a.__experimentalUseProductEntityProp)("meta_data.group_of_quantity",{postType:p}),[d,l]=(0,a.__experimentalUseProductEntityProp)("meta_data.minimum_allowed_quantity",{postType:p}),[m]=(0,a.__experimentalUseProductEntityProp)("meta_data.minmax_override_main_product",{postType:p}),[_]=(0,a.__experimentalUseProductEntityProp)("parent_id",{postType:p}),{metadata:y,isLoading:g}=(0,a.__experimentalUseProductMetadata)({id:_}),{groupOf:f,isCategoryGroupOf:w}=function(e){const t=e?.postType||"product",o=(0,i.useEntityId)("postType",t),a=e?.useParentCategories?e?.parentId:o,{selectedCategories:r,groupOf:p}=(0,n.useSelect)((r=>{const{getEditedEntityRecord:n}=r("core"),{meta_data:i}=n("postType",t,a),{categories:p}=e?.useParentCategories?n("postType","product",e?.parentId):n("postType",t,a),s=i?.find((e=>"group_of_quantity"===e.key))?.value;return{groupOf:e?.useParentCategories?n("postType","product_variation",o).meta_data?.find((e=>"group_of_quantity"===e.key))?.value:s,selectedCategories:r("core").getEntityRecords("taxonomy","product_cat",{include:p?.map((e=>e.id))})||[]}}),[a]),s=Math.min(...r.filter((e=>""!==e.meta?.group_of_quantity)).map((e=>parseFloat(e.meta?.group_of_quantity||"0")))),u=Boolean(s&&s!==1/0),c=Boolean(u&&!p);return{groupOf:p&&String(p||"")||c&&String(s)||"1",isCategoryGroupOf:c,hasCategoryGroupOf:u,categoryGroupOf:String(s)}}({parentId:_,postType:p,useParentCategories:!0}),x=!m||"no"===m||"yes"===y?.allow_combination;let T="";g||(T=function(e){return e||""}(x?y?.group_of_quantity:u));let P="";return g||(P=w?(0,r.sprintf)(
// translators: %d is the value of the category group of quantity.
// translators: %d is the value of the category group of quantity.
(0,r.__)("%d (category default)","woocommerce-min-max-quantities"),f):(0,r.sprintf)(
// translators: %d is the value of the category group of quantity.
// translators: %d is the value of the category group of quantity.
(0,r.__)("%d (default)","woocommerce-min-max-quantities"),f)),(0,t.createElement)("div",{...s},(0,t.createElement)(a.__experimentalNumberControl,{...e,onChange:e=>{(function(e){return parseFloat(e||"0")}(e)>0||""===e)&&c(e)},disabled:g||x,onBlur:()=>{!d&&u&&l(u)},value:T,placeholder:P}))}})})();